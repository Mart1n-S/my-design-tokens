import { Canvas, Meta, Controls, ArgTypes, Story } from '@storybook/addon-docs/blocks';
import * as ModalStories from './Modal.stories';

<Meta of={ModalStories} />

# Modal ü™ü

La mol√©cule `Modal` est une fen√™tre de dialogue qui se superpose au contenu principal.  
Elle capture l'attention de l'utilisateur pour une t√¢che critique, une confirmation ou un affichage d'information d√©taill√©e, tout en d√©sactivant l'interaction avec l'arri√®re-plan (Backdrop).

---

### Playground

Utilisez ce playground pour voir la structure de la modal.  
*(Note : Pour des raisons de pr√©sentation dans cette doc, la modal est affich√©e "inline" ici, mais en production elle prend tout l'√©cran).*

<Canvas of={ModalStories.Playground} />
<Controls of={ModalStories.Playground} />

---

### Tailles Standardis√©es

La modal propose 3 largeurs fixes pour s'adapter √† la densit√© du contenu :

1.  **Small (sm)** : Confirmations rapides, messages d'alerte simples.
2.  **Medium (md)** : Formulaires courts, √©dition de profil (Standard).
3.  **Large (lg)** : Tableaux de donn√©es, pr√©visualisation de documents.

<Canvas of={ModalStories.VariantesTailles} />

---

### D√©mo Interactive (Live)

Cliquez sur les boutons ci-dessous pour ouvrir une **vraie modal** qui se superpose √† cette documentation.  
Testez la fermeture via :
* La croix en haut √† droite.
* Le bouton "Annuler".
* La touche `Echap` (Clavier).
* Le clic √† l'ext√©rieur (Backdrop).

<Canvas of={ModalStories.DemoInteractive} />

---

### API (Props & Events)

Le composant expose des props de configuration et un slot `#footer` pour standardiser l'alignement des boutons d'action.

<ArgTypes of={ModalStories} />

---
### Do's & Don'ts

#### 1. Usage & Contexte

<div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginTop: '20px' }}>
  
  <div style={{ background: '#f0fdf4', border: '1px solid #bbf7d0', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#166534', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>‚úÖ √Ä faire (Do)</p>
    <ul>
      <li>Utiliser pour des t√¢ches courtes et focalis√©es (ex: "Confirmer la suppression").</li>
      <li>Toujours fournir un titre explicite via la prop <code>title</code>.</li>
      <li>Utiliser le slot <code>#footer</code> pour placer les boutons d'action.</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Bon exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<Modal title="Supprimer l'utilisateur ?" :is-open="isOpen">
  <p>Cette action est irr√©versible.</p>
  <template #footer>
    <BaseButton variant="secondary" @click="close">Annuler</BaseButton>
    <BaseButton variant="danger">Supprimer</BaseButton>
  </template>
</Modal>`}
        </pre>
    </div>
  </div>

  <div style={{ background: '#fef2f2', border: '1px solid #fecaca', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#991b1b', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>‚ùå √Ä ne pas faire (Don't)</p>
    <ul>
      <li>Ne pas ouvrir une modal par-dessus une autre modal (Stacked Modals).</li>
      <li>Ne pas utiliser pour des formulaires tr√®s longs (pr√©f√©rer une page d√©di√©e).</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Mauvais exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<Modal :is-open="showParent">
  <Modal :is-open="showChild">
    Inception...
  </Modal>
</Modal>`}
        </pre>
    </div>
  </div>

</div>

#### 2. Contenu & Ergonomie

<div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginTop: '20px' }}>
  
  <div style={{ background: '#f0fdf4', border: '1px solid #bbf7d0', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#166534', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>‚úÖ √Ä faire (Do)</p>
    <ul>
      <li>Proposer toujours un moyen clair de fermer (Bouton Annuler).</li>
      <li>Adapter la taille (<code>size</code>) au contenu.</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Bon exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<Modal size="sm" title="Info">
  <p>Action effectu√©e.</p>
  <template #footer>
    <BaseButton @click="close">OK</BaseButton>
  </template>
</Modal>`}
        </pre>
    </div>
  </div>

  <div style={{ background: '#fef2f2', border: '1px solid #fecaca', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#991b1b', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>‚ùå √Ä ne pas faire (Don't)</p>
    <ul>
      <li>Ne pas masquer la croix ou emp√™cher la fermeture (Anti-pattern).</li>
      <li>Ne pas mettre un contenu g√©ant dans une petite modal.</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Mauvais exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<style>.close-button { display: none }</style>
<Modal title="Publicit√©" :click-outside="false">
   Vous ne pouvez pas partir...
</Modal>`}
        </pre>
    </div>
  </div>

</div>

---

### Accessibilit√©

Ce composant g√®re nativement les pr√©-requis WCAG pour les fen√™tres modales :

* **Focus Trap** : Lorsque la modal est ouverte, la navigation au clavier (`Tab`) reste confin√©e √† l'int√©rieur de la fen√™tre.
* **Focus Management** : √Ä l'ouverture, le focus est plac√© sur le premier √©l√©ment interactif ou le conteneur. √Ä la fermeture, il retourne sur le bouton qui a d√©clench√© l'ouverture.
* **Clavier** : La touche `Echap` ferme la fen√™tre.
* **ARIA** : Le r√¥le `dialog` et `aria-modal="true"` sont appliqu√©s automatiquement.
* **Body Scroll** : Le d√©filement de la page en arri√®re-plan est d√©sactiv√© (`overflow: hidden` sur le body).