import { Canvas, Meta, Controls, ArgTypes, Story } from '@storybook/addon-docs/blocks';
import * as InputStories from './BaseInput.stories';

<Meta of={InputStories} />

# BaseInput ⌨️

L'atome `BaseInput` est un champ de saisie texte unifié.  
Il gère nativement les différents types HTML (`text`, `email`, `password`...), l'ajout d'icônes et les états de validation.

---

### Playground

Utilisez le contrôleur ci-dessous pour tester le comportement du champ (saisie, icônes, erreur...).

<Canvas of={InputStories.Playground} />
<Controls of={InputStories.Playground} />

---

### Basique & Icônes

Le champ peut être utilisé simplement avec un placeholder, ou enrichi avec des icônes à gauche (ex: user) et à droite (ex: check validation).

<Canvas of={InputStories.BasiqueEtIcones} />

---

### États Visuels

Le composant communique clairement son état à l'utilisateur :

1.  **Error** : Bordure rouge et icône d'alerte. Indique une validation échouée.
2.  **Disabled** : Grisé et non-interactif. Indique une action impossible.
3.  **Readonly** : Aspect standard mais non-modifiable. Pour copier une valeur (ex: clé API, ID).

<Canvas of={InputStories.EtatsVisuels} />

---

### API (Props)

<ArgTypes of={InputStories} />

---

### Do's & Don'ts

#### 1. Sémantique & UX (Clavier)

<div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginTop: '20px' }}>
  
  <div style={{ background: '#f0fdf4', border: '1px solid #bbf7d0', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#166534', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>✅ À faire (Do)</p>
    <ul>
      <li>Utiliser le bon <code>type</code> HTML (email, tel, number) pour afficher le clavier adapté sur mobile.</li>
      <li>Toujours associer l'input à un label visible ou un <code>aria-label</code>.</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Bon exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<BaseInput 
  type="tel" 
  icon-left="phone" 
  aria-label="Téléphone"
/>`}
        </pre>
    </div>
  </div>

  <div style={{ background: '#fef2f2', border: '1px solid #fecaca', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#991b1b', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>❌ À ne pas faire (Don't)</p>
    <ul>
      <li>Ne pas utiliser <code>type="text"</code> pour tout.</li>
      <li>Ne pas utiliser le <code>placeholder</code> comme seul label (il disparaît dès que l'utilisateur écrit).</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Mauvais exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<BaseInput placeholder="Entrez votre email..." />`}
        </pre>
    </div>
  </div>

</div>

#### 2. États & Interaction

<div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginTop: '20px' }}>
  
  <div style={{ background: '#f0fdf4', border: '1px solid #bbf7d0', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#166534', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>✅ À faire (Do)</p>
    <ul>
      <li>Utiliser <code>readonly</code> (lecture seule) si l'utilisateur doit pouvoir copier le contenu (ex: Clé API).</li>
      <li>Utiliser <code>error</code> en combinaison avec un message d'aide explicatif sous le champ.</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Bon exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<BaseInput 
  model-value="API-KEY-12345" 
  readonly 
  icon-right="copy" 
/>`}
        </pre>
    </div>
  </div>

  <div style={{ background: '#fef2f2', border: '1px solid #fecaca', padding: '15px', borderRadius: '8px' }}>
    <p style={{ color: '#991b1b', marginTop: 0, fontSize: '24px', fontWeight: 'bold' }}>❌ À ne pas faire (Don't)</p>
    <ul>
      <li>Ne pas utiliser <code>disabled</code> si l'utilisateur a besoin de sélectionner/copier le texte.</li>
      <li>Ne pas désactiver le copier/coller sur les champs, surtout pour les mots de passe (gestionnaires de MDP).</li>
    </ul>
    <div style={{ marginTop: '10px' }}>
        <strong>Mauvais exemple :</strong>
        <pre style={{ background: '#fff', padding: '10px', borderRadius: '4px', border: '1px solid #ddd', fontSize: '12px' }}>
{`<BaseInput model-value="Mon ID" disabled />`}
        </pre>
    </div>
  </div>

</div>

---

### Accessibilité

* **Focus** : Outline visible pour la navigation au clavier.
* **États** : Si `disabled` ou `readonly`, l'attribut HTML correspondant est appliqué.
* **Labeling** : Ce composant est "dumb" (bête). Il **doit** être utilisé dans un contexte qui lui fournit un label (comme `FormField`) ou avoir un attribut `aria-label`.